<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>Xiaowei's Blog</title><meta name="author" content="Ma Xiaowei"><meta name="copyright" content="Ma Xiaowei"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="Xiaowei&#39;s Blog">
<meta property="og:url" content="https://www.maxiaowei.tech/page/2/index.html">
<meta property="og:site_name" content="Xiaowei&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.maxiaowei.tech/img/inspectocat.jpg">
<meta property="article:author" content="Ma Xiaowei">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.maxiaowei.tech/img/inspectocat.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.maxiaowei.tech/page/2/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?75c77a06128d0e6c104a661fbbe692bf";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Ma Xiaowei","link":"链接: ","source":"来源: Xiaowei's Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Xiaowei\'s Blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-02-13 20:52:08'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/inspectocat.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">21</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Xiaowei's Blog"><span class="site-name">Xiaowei's Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/128566356.html" title="局域网内服务器证书申请">局域网内服务器证书申请</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-14T11:13:33.000Z" title="发表于 2021-08-14 19:13:33">2021-08-14</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-08-14T11:13:33.000Z" title="更新于 2021-08-14 19:13:33">2021-08-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/server/">server</a></span></div><div class="content">为了可以使用https协议访问局域网内的服务器，收集并整理了网上有关局域网证书签发的资料。
生成CA


创建CA使用的密钥
openssl genrsa -out ca.key


生成根CA证书
openssl req -new -x509 -key ca.key -out ca.crt -days 3650


将CA证书放入受信任的根证书颁发机构（windows系统）



签发服务器使用的证书


生成证书使用的密钥
openssl genrsa -out web.key


生成证书请求文件CSR
由于我们的服务器是通过ip地址或域名都可访问的，所以在申请证书时，需要修改默认的配置文件以添加额外信息。可以将默认的openssl.cnf文件复制一份后进行修改，该文件所在位置在openssl的OPENSSLDIR目录中，可以通过openssl version -a命令获取。
# 文件名为 openssl.cnf[ req ]default_bits		= 2048distinguished_name	= req_distinguished_namereq_extensions  ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/4201669077.html" title="Kotlin开发Android的小技巧">Kotlin开发Android的小技巧</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-03-11T06:11:33.000Z" title="发表于 2021-03-11 14:11:33">2021-03-11</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-03-11T06:11:33.000Z" title="更新于 2021-03-11 14:11:33">2021-03-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Android/">Android</a></span></div><div class="content">本文主要用于记录自己开发过程中觉得好用的编码技巧，主要来自于第三版的《第一行代码Android》以及博客。
启动Activity
常见的启动Activity的方法是
val intent = Intent(this, MyActivity::class.java)intent.putExtra(&quot;param1&quot;, &quot;data1&quot;)intent.putExtra(&quot;param2&quot;, &quot;data2&quot;)startActivity(intent)
使用这种方法每次都要重复编码，且容易忘记需要传递的参数的信息，可以通过在Activity中定义静态方法来简化，如下所示：
class MyActivity : AppCompatActivity()&#123;    ...    companion object &#123;        fun actionStart(context: Context, data1:String, data2:String) &#123;            val intent  ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/1083767513.html" title="UNIX环境高级编程（19-伪终端）">UNIX环境高级编程（19-伪终端）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-01-06T03:37:02.000Z" title="发表于 2021-01-06 11:37:02">2021-01-06</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-01-06T03:37:02.000Z" title="更新于 2021-01-06 11:37:02">2021-01-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">概述
伪终端是指，对于一个应用程序，它看上去是一个终端，而实际上却并不是一个真正的终端。
父进程首先打开一个伪终端主设备，随后fork，子进程打开相应的伪终端从设备，并将该文件描述符复制到stdin/out/err，最后调用exec。
对于伪终端从设备上的用户进程来说，其stdin/out/err都是终端设备，因此可以处理上一章介绍的各类终端I/O函数。并且，所有写到伪终端主设备的都会作为从设备的输入，反之亦然。

其典型结构如下图所示：

为说明方面，下面将伪终端简称为PTY。
典型用途
网络登录服务器
如telnetd和rlogind服务器。这方面不太熟悉，故不展开讲。
窗口系统终端模拟
窗口系统通常提供一个终端模拟器，这使得我们可以在命令行环境下通过shell运行程序。
终端模拟器是shell和窗口管理器之间的媒介。shell将自己的标准输入/输出/错误连接到PTY的从设备端，而终端模拟器则管理对应的主设备端。其大致框图如下：

当用户改变模拟器的窗口大小时，窗口管理器会通知模拟器，而模拟器则在主设备端利用TIOCSWINSZ命令设置从设备的窗口大小。前台PTY从设备的进程组会收 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/255074044.html" title="UNIX环境高级编程（18-终端I/O）">UNIX环境高级编程（18-终端I/O）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-12-30T07:59:07.000Z" title="发表于 2020-12-30 15:59:07">2020-12-30</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-12-30T07:59:07.000Z" title="更新于 2020-12-30 15:59:07">2020-12-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">本章主要介绍终端的相关概念，及一些修改终端操作的函数。
概念
工作模式
主要有以下两种工作模式：

规范模式（Canonical mode）输入处理。在此模式下，对于终端的输入以行为单位进行处理。每次读取最多返回一行。这是默认的模式。
非规范模式（Noncanonical mode）输入处理。输入字符不装配成行，一些特殊字符（如Ctrl+D）以不会进行处理。


这两种模式在后面会有详细解释。
终端特性
在结构termios中定义了终端设备全部特性的标志，在其中又将各种标志进行分类，其结构大体如下：
struct termios &#123;  tcflag_t  c_iflag;      /* input flags */  tcflag_t  c_oflag;      /* output flags */  tcflag_t  c_cflag;      /* control flags */  tcflag_t  c_lflag;      /* local flags */  cc_t      c_cc[NCCS];   /* control characters */& ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/2640012016.html" title="UNIX环境高级编程（15-进程间通信）">UNIX环境高级编程（15-进程间通信）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-12-21T09:29:05.000Z" title="发表于 2020-12-21 17:29:05">2020-12-21</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-12-21T09:29:05.000Z" title="更新于 2020-12-21 17:29:05">2020-12-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">本章主要介绍一些进程间通信的方式，如管道、消息队列、信号量和共享存储等。
管道
一般来说，管道是半双工的（即数据只能在一个方向上流动），并且只能在具有公共祖先的两个进程之间使用。通常，父进程创建管道后会接着调用fork，从而利用管道在父子进程之间通信。


之后，父子进程可以分别关闭管道的读/写端，以利用管道在父子进程中传递信息。例如，如果想要创建从父进程到子进程的管道，则可以关闭父进程的读端和子进程的写端。
由于管道半双工的特性，想要在父子进程间双向传递信息需要建立2个管道。
#include &lt;unistd.h&gt;// Returns: 0 if OK, −1 on errorint pipe(int fd[2]);
利用pipe函数可以创建管道，fd参数返回两个文件描述符，fd[0]为读而打开，fd[1]为写而打开。fd[1]的输出是fd[0]的输入。
在上面的例子中，父进程关闭fd[0]，子进程关闭fd[1]，那么最后的示意图如下：

注意：

当读一个写端被关闭的管道，在所有数据被读取后，read返回0
当写一个读端被关闭的管道，会产生SIGPIPE信号。如果忽略该 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/3327551038.html" title="UNIX环境高级编程（14-高级I/O）">UNIX环境高级编程（14-高级I/O）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-12-09T01:48:40.000Z" title="发表于 2020-12-09 09:48:40">2020-12-09</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-12-09T01:48:40.000Z" title="更新于 2020-12-09 09:48:40">2020-12-09</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">本章主要介绍几种高级I/O功能，主要有非阻塞I/O、记录锁、I/O多路转接、异步I/O、readv/writev函数和存储映射I/O。
非阻塞I/O
某些系统调用可能会使进程永远阻塞，一般称其为低速系统调用。而使用非阻塞I/O，可以使open、read和write这类I/O操作不会阻塞，如果不能完成这些操作时，会立即出错返回。
有两种方法将其指定为非阻塞I/O：


调用open时指定O_NONBLOCK标志。


通过fcntl函数打开O_NONBLOCK文件状态标志。
#include &lt;fcntl.h&gt;// Returns: depends on cmd if OK (see following), −1 on errorint fcntl(int fd, int cmd, ... /* int arg */ );



记录锁
记录锁的主要功能是阻止多个进程同时修改文件的某一文件区。记录锁可以对整个文件加锁，也可以只针对文件的一部分进行加锁。
锁的类型
主要有共享读锁和独占性写锁这两种。
加读/写锁时，文件描述符必须是读/写打开。
任意多个进程在给定的字节上可以有一 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/1130609607.html" title="UNIX环境高级编程（13-守护进程）">UNIX环境高级编程（13-守护进程）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-12-04T06:39:01.000Z" title="发表于 2020-12-04 14:39:01">2020-12-04</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-12-04T06:39:01.000Z" title="更新于 2020-12-04 14:39:01">2020-12-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">主要特点

一般在系统启动时装入，仅在系统关闭时终止。
大多数守护进程以超级用户特权运行。
所有的守护进程都没有控制终端，其终端名设置为问号。

内核守护进程以无控制终端方式启动。
用户层守护进程可以通过调用setsid实现。


用户层守护进程的父进程是init进程。


消息输出
前面提到，守护进程是没有控制终端的，显然无法将自己的消息输出到标准输出或标准错误上。而且系统中运行着许多守护进程，因此需要一个集中的守护进程记录设施，即syslog。

如上图所示，主要有3中产生日志消息的方式：

内核例程调用log函数
大多数用户进程调用syslog函数
将日志消息发送到UDP的514端口

而syslogd守护进程接收这些日志消息，在其启动前会读取配置文件（/etc/syslog.conf），以决定各类消息的处理方式。
#include &lt;syslog.h&gt;void openlog(const char *ident, int option, int facility);void syslog(int priority, const char *format, ...); ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/4068102677.html" title="UNIX环境高级编程（12-线程控制）">UNIX环境高级编程（12-线程控制）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-11-30T07:31:55.000Z" title="发表于 2020-11-30 15:31:55">2020-11-30</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-11-30T07:31:55.000Z" title="更新于 2020-11-30 15:31:55">2020-11-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">本章详细介绍了线程属性和同步原语属性。最后讨论基于进程的系统调用如何与线程进行交互。
属性
可以通过对每个对象关联的不同属性来细调线程和同步对象的行为。管理这些属性的函数大概有以下几类：

初始化函数，负责给属性设置为默认值
销毁函数，负责释放初始化函数分配的资源
获取属性值的函数
设置属性值的函数


线程属性


初始化和销毁
// Both return: 0 if OK, error number on failureint pthread_attr_init(pthread_attr_t *attr);int pthread_attr_destroy(pthread_attr_t *attr);
destroy函数除了释放资源外，还会用无效的值初始化属性对象，这样当线程创建函数误用该对象时，会返回错误信息。


分离状态属性detachstate
// Both return: 0 if OK, error number on failureint pthread_attr_getdetachstate(const pthread_attr_t *restrict attr, ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/3649803512.html" title="UNIX环境高级编程（11-线程）">UNIX环境高级编程（11-线程）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-11-18T06:25:01.000Z" title="发表于 2020-11-18 14:25:01">2020-11-18</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-11-18T06:25:01.000Z" title="更新于 2020-11-18 14:25:01">2020-11-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">本章主要介绍线程的概念，创建和终止线程以及线程同步问题。
使用到的函数默认需要包含pthread.h头文件，且在使用gcc编译时，需要链接pthread库。
代码地址：https://gitee.com/maxiaowei/Linux/tree/master/apue
线程的创建与终止
创建线程
// Returns: 0 if OK, error number on failureint pthread_create(pthread_t *restrict tidp,                   const pthread_attr_t *restrict attr,                   void *(*start_rtn)(void *), void *restrict arg);
新创建的线程的线程ID被设置成tidp指向的内存单元；attr参数定制线程的不同属性；start_rtn函数是线程开始时执行的函数，其参数可以通过arg进行传递。
注意：
新线程最好不要通过tidp指向的内存空间获取自己的线程ID，因为如果新线程在主线程调用pthread_cre ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/3268952981.html" title="C专家编程(4)">C专家编程(4)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-11-02T07:52:38.000Z" title="发表于 2020-11-02 15:52:38">2020-11-02</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-11-02T07:52:38.000Z" title="更新于 2020-11-02 15:52:38">2020-11-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/c-language/">C语言</a></span></div><div class="content">数组与指针
在大部分情况下，数组和指针是可以互换的。书中的第4章主要讲解了数组和指针的不同之处，而在第9章则着重讨论两者可以互换的场景。

不同之处
对于两者的不同之处，主要在于访问两者时有一些不同。
编译器会为每个变量分配一个地址，每个符号的地址在编译时可知（如数组的名字）。那么在访问数组中的数据时，可以通过符号表直接得出数组的起始地址，加上偏移量即可访问对应的数据。
而对于指针，必须先在运行时取得它当前存储的值，再对它解引用来获取（数组的）起始值，最后才能加上偏移量来访问数据。



其他区别



指针
数组




保存数据的地址
保存数据


间接访问数据，首先取得指针的内容，把它作为地址，然后从这个地址提取数据。如果指针有一个下标[i]，就把指针的内容加上i作为地址，从中提取数据
直接访问数据，a[i]只是简单的a+i为地址取得数据


通常用于动态数据结构
通常用于存储固定数目且数据类型相同的元素


相关的函数为malloc()，free()
隐式分配和删除


通常指向匿名数据
自身即为数据名



相同之处
在书中，主要从“声明”和“使用”两种情况下进行讨论，直接看 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/inspectocat.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Ma Xiaowei</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">21</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/maxiaowei0216"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/maxiaowei0216" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:admin@maxiaowei.tech" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/3660125672.html" title="Unraid community application 插件镜像">Unraid community application 插件镜像</a><time datetime="2022-03-22T08:57:36.000Z" title="发表于 2022-03-22 16:57:36">2022-03-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/2391406559.html" title="解决heimdall无法刷新app列表的问题">解决heimdall无法刷新app列表的问题</a><time datetime="2022-03-08T08:46:24.000Z" title="发表于 2022-03-08 16:46:24">2022-03-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/3612691073.html" title="在VMware中安装unraid系统">在VMware中安装unraid系统</a><time datetime="2022-03-03T10:41:39.000Z" title="发表于 2022-03-03 18:41:39">2022-03-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/2189133327.html" title="简述几种经典的网络攻击方式">简述几种经典的网络攻击方式</a><time datetime="2021-12-29T14:39:29.000Z" title="发表于 2021-12-29 22:39:29">2021-12-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/807237865.html" title="git常用操作">git常用操作</a><time datetime="2021-12-15T06:01:26.000Z" title="发表于 2021-12-15 14:01:26">2021-12-15</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Android/"><span class="card-category-list-name">Android</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/c-language/"><span class="card-category-list-name">C语言</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/nas/"><span class="card-category-list-name">nas</span><span class="card-category-list-count">6</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/security/"><span class="card-category-list-name">security</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/server/"><span class="card-category-list-name">server</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/tools/"><span class="card-category-list-name">工具</span><span class="card-category-list-count">3</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/CSRF/" style="font-size: 1.1em; color: #999">CSRF</a> <a href="/tags/Clickjacking/" style="font-size: 1.1em; color: #999">Clickjacking</a> <a href="/tags/Django/" style="font-size: 1.1em; color: #999">Django</a> <a href="/tags/I-O/" style="font-size: 1.1em; color: #999">I/O</a> <a href="/tags/IPC/" style="font-size: 1.1em; color: #999">IPC</a> <a href="/tags/SQL-injection/" style="font-size: 1.1em; color: #999">SQL injection</a> <a href="/tags/Terminal/" style="font-size: 1.23em; color: #999ea6">Terminal</a> <a href="/tags/XSS/" style="font-size: 1.1em; color: #999">XSS</a> <a href="/tags/apue/" style="font-size: 1.5em; color: #99a9bf">apue</a> <a href="/tags/cert/" style="font-size: 1.1em; color: #999">cert</a> <a href="/tags/daemon/" style="font-size: 1.1em; color: #999">daemon</a> <a href="/tags/frp/" style="font-size: 1.1em; color: #999">frp</a> <a href="/tags/git/" style="font-size: 1.37em; color: #99a4b2">git</a> <a href="/tags/heimdall/" style="font-size: 1.1em; color: #999">heimdall</a> <a href="/tags/k8s/" style="font-size: 1.1em; color: #999">k8s</a> <a href="/tags/kotlin/" style="font-size: 1.1em; color: #999">kotlin</a> <a href="/tags/nextcloud/" style="font-size: 1.1em; color: #999">nextcloud</a> <a href="/tags/onlyoffice/" style="font-size: 1.1em; color: #999">onlyoffice</a> <a href="/tags/thread/" style="font-size: 1.23em; color: #999ea6">thread</a> <a href="/tags/unraid/" style="font-size: 1.23em; color: #999ea6">unraid</a> <a href="/tags/website/" style="font-size: 1.1em; color: #999">website</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/10/"><span class="card-archive-list-date">十月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">八月 2021</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">三月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/01/"><span class="card-archive-list-date">一月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/12/"><span class="card-archive-list-date">十二月 2020</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/11/"><span class="card-archive-list-date">十一月 2020</span><span class="card-archive-list-count">3</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">24</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2020-10-20T00:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">40.7k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-02-13T12:52:08.577Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Ma Xiaowei</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/">苏ICP备20016085号</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>